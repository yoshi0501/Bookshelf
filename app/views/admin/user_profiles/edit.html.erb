<div class="d-flex justify-content-between align-items-center mb-4">
  <div>
    <h1 class="h2 fw-bold mb-2"><%= t('user_profiles.edit.title') %></h1>
    <p class="text-muted mb-0"><%= @user_profile.name %></p>
  </div>
  <div>
    <%= link_to admin_user_profile_path(@user_profile), class: "btn btn-outline-secondary btn-sm" do %>
      <i class="bi bi-arrow-left me-1"></i><%= t('shared.actions.back') %>
    <% end %>
  </div>
</div>

<%= render "shared/form_errors", resource: @user_profile %>

<div class="card shadow-sm border-0">
  <div class="card-header bg-white border-bottom">
    <h5 class="card-title mb-1 fw-bold">
      <i class="bi bi-person me-2"></i><%= t('user_profiles.form.basic_info') %>
    </h5>
    <small class="text-muted"><%= t('user_profiles.form.basic_info_desc') %></small>
  </div>
  <div class="card-body">
    <%= form_with model: [:admin, @user_profile], local: true do |f| %>
      <div class="row g-3">
        <div class="col-md-6">
          <%= f.label :name, t('user_profiles.form.name'), class: "form-label fw-semibold" %>
          <%= f.text_field :name, class: "form-control" %>
        </div>

        <div class="col-md-6">
          <%= f.label :phone, t('user_profiles.form.phone'), class: "form-label fw-semibold" %>
          <%= f.text_field :phone, class: "form-control" %>
        </div>

        <div class="col-md-6">
          <%= f.label :payment_terms, t('user_profiles.form.payment_terms'), class: "form-label fw-semibold" %>
          <%= f.text_field :payment_terms, class: "form-control", placeholder: t('user_profiles.form.payment_terms_placeholder') %>
          <div class="form-text"><%= t('user_profiles.form.payment_terms_help') %></div>
        </div>

        <div class="col-md-6">
          <%= f.label :supervisor_id, t('user_profiles.form.supervisor'), class: "form-label fw-semibold" %>
          <%= f.collection_select :supervisor_id, @supervisor_options, :last, :first, 
              { include_blank: t('user_profiles.form.select_supervisor') }, 
              { class: "form-select" } %>
          <div class="form-text"><%= t('user_profiles.form.supervisor_help') %></div>
        </div>
        <% if current_user.internal_admin? && @manufacturers.present? %>
          <div class="col-md-12">
            <%= f.label :manufacturer_id, "メーカー（発送依頼用ログイン）", class: "form-label fw-semibold" %>
            <%= f.collection_select :manufacturer_id, @manufacturers, :id, :display_name,
                { include_blank: "メーカーアカウントにしない" },
                { class: "form-select" } %>
            <div class="form-text">設定すると、このユーザーは当該メーカーとしてログインし発送依頼のみ表示します。</div>
          </div>
        <% end %>
      </div>

      <div class="mt-4 d-flex justify-content-end gap-2">
        <%= link_to t('shared.actions.cancel'), admin_user_profile_path(@user_profile), class: "btn btn-outline-secondary" %>
        <%= f.submit t('shared.actions.update'), class: "btn btn-primary" %>
      </div>
    <% end %>
  </div>
</div>
