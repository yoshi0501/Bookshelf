# 当社が取得した個人データをクラウドサービスに保管する場合の確認事項 — 本システムにおける回答

「当社が取得した個人データをクラウドサービスに保管する場合は、クラウドサービス事業者が当該個人データを取り扱わない旨が契約書、約款、規約等によって定められており、適切なアクセス制御が行われていることを必ず確認する」との方針に対する、本システム（Bookshelf）に関する回答です。

---

## 回答の前提

- **本システム** … Bookshelf（B2B 発注・請求管理システム）。ユーザー（メールアドレス・氏名・電話番号等）、発注・請求に係るデータを扱う。
- **個人データの例** … ユーザーのメールアドレス、氏名、電話番号（User / UserProfile）、および発注先・請求先に紐づく担当者情報等。本システム上でクラウド（ホスティング環境）の DB 等に保存される。
- **クラウドサービス事業者** … 本システムを運用・ホスティングする事業者（自社運用の場合は当社、外部に委託している場合は受託者および IaaS/PaaS 提供者）を指すものとします。

---

## 1. クラウドサービス事業者が当該個人データを取り扱わない旨の契約等での定め

### 1.1 本システム（アプリケーション）の範囲

- 本システムの**アプリケーション内**に、クラウドサービス事業者と利用者との間の「契約書・約款・規約」の条文そのものを保持・表示する機能は**実装されていません**。
- したがって、「事業者が当該個人データを取り扱わない旨」が契約書・約款・規約等で定められているかどうかは、**本システムの画面や設定からは確認できず**、契約・運用の文書および契約締結プロセスで確認する必要があります。

### 1.2 確認すべき内容（推奨）

クラウドサービスに個人データを保管するにあたり、以下を契約書・約款・規約等で**確認する**ことを推奨します。

| 確認項目 | 内容例 |
|----------|--------|
| 利用目的の限定 | 事業者が当該個人データを、契約で定めたサービスの提供に必要な範囲を超えて利用しない旨 |
| 第三者提供の禁止 | 当社の同意なく第三者に提供・預託しない旨 |
| 委託時の取り扱い | 再委託先がいる場合、同様の取り扱いを義務付ける旨 |
| 契約終了後の削除・返還 | 契約終了時に個人データを削除または返還する旨（必要に応じて証明方法も） |

- **自社運用**の場合 … 当社とホスティング（IaaS/PaaS）事業者との契約・約款で上記を確認する。
- **外部委託**（SaaS として提供等）の場合 … 当社と受託者との業務委託契約・利用規約等で「受託者が個人データを利用目的外に取り扱わない」旨が明記されていることを確認する。

**本システムとしての回答**: 契約等での「取り扱わない旨」の有無は、アプリケーションでは保持していないため、**契約書・約款・規約等の文書および締結プロセスに基づき確認すること**が必要です。

---

## 2. 適切なアクセス制御が行われていることの確認

### 2.1 本システムで実装しているアクセス制御

本システム（Bookshelf）では、個人データを含むデータへのアクセスについて、以下のアクセス制御を実装しています。

| 措置 | 内容 |
|------|------|
| **認証** | 全画面でログイン必須（`authenticate_user!`）。未認証はログイン画面へリダイレクト。メールアドレス＋パスワード認証（Devise）。 |
| **認可（権限によるスコープ）** | Pundit により、会社（テナント）・ロール（内部管理者／会社管理者／一般／メーカー）ごとに参照・編集可能なデータを制限。他社・他拠点のデータは原則表示・操作不可。 |
| **パスワードポリシー** | 12 文字以上、90 日ごとの変更推奨、直近 5 回の再利用禁止、連続失敗時のロック（devise-security）。 |
| **セッション** | 30 分のタイムアウト（設定変更可能）。 |
| **通信の暗号化** | 本番では HTTPS（SSL/TLS）の利用を想定。`force_ssl` の本番有効化を推奨（詳細は `docs/通信暗号化・アクセス制御_現状回答.md` 参照）。 |
| **監査ログ** | PaperTrail により、主要データの変更履歴（誰が・いつ・どのレコードを変更したか）を記録。 |

上記により、**利用者（ユーザー）による個人データへのアクセス**については、認証・認可・監査の観点でアクセス制御が行われています。

### 2.2 クラウドサービス事業者側のアクセス制御

「適切なアクセス制御」には、**事業者（運用者・ホスティング事業者）の担当者が個人データにアクセスする場合の制御**も含まれます。これらはアプリケーション単体では完結せず、運用・契約で確認する必要があります。

| 確認項目 | 内容例 |
|----------|--------|
| 運用者によるアクセス | 運用・障害対応で DB 等にアクセスする場合のルール（必要最小限の権限、ログ取得、アクセス事由の記録等）が規程・契約で定められているか。 |
| ホスティング事業者のアクセス | IaaS/PaaS 事業者が当該データにアクセスしない旨、またはアクセスする場合の制限・目的が契約・約款で定められているか。 |
| 物理・論理的なアクセス制御 | データセンター・ネットワークのアクセス制御、ログの保管期間等が契約・SLA で明示されているか。 |

**本システムとしての回答**: **アプリケーション層**では、上記 2.1 のとおり認証・認可・監査等のアクセス制御を実装しています。**事業者側**（運用者・ホスティング事業者）のアクセス制御については、**契約書・約款・規約・運用規程等に基づき確認すること**が必要です。

---

## 3. まとめ（確認すべきことの整理）

| 確認事項 | 本システムの状況 | 確認方法 |
|----------|------------------|----------|
| 事業者が個人データを取り扱わない旨の契約等での定め | 契約・約款の条文はアプリ内に保持していない | **契約書・約款・規約等の文書**で、利用目的の限定・第三者提供禁止等が定められているかを確認する。 |
| 適切なアクセス制御（利用者によるアクセス） | 認証・認可・パスワードポリシー・セッション・監査ログを実装済み | 本ドキュメント 2.1 のとおり。必要に応じて技術仕様・画面仕様で補足確認。 |
| 適切なアクセス制御（事業者によるアクセス） | アプリでは制限できない | **契約・約款・運用規程**で、運用者・ホスティング事業者のアクセス制限・ログ等が定められているかを確認する。 |

上記を踏まえ、**「契約書、約款、規約等によって定められていること」**は契約等の文書確認で、「**適切なアクセス制御が行われていること**」のうち利用者向けは本システムで実装済み、事業者向けは契約・運用で確認する、という整理で回答できます。
