# Bookshelf（プラRE）プロジェクトコンセプト

AI や新メンバーにプロジェクトの前提を渡すためのドキュメントです。チャット履歴が消えても、このファイルを参照すれば続きから対応できます。

---

## 名称・概要

**Bookshelf（プラRE）** — クローズドリサイクルに基づく B2B 発注管理システム。商品の循環と CO2 削減を「見える化」し、企業の環境負荷低減を支援するプラットフォーム。

---

## 中核コンセプト

1. **クローズドリサイクルによる商品循環**
   - 企業間で商品（資材・製品など）を回収・再利用し、循環させる。
   - システム上で「発注 → 納品 → 回収 → 再発注」のサイクルを追跡・管理する。

2. **CO2 排出量の計測と見える化**
   - 商品単位の CO2 係数（`co2_per_unit`）を設定し、発注・納品データから CO2 排出量・削減量を自動計算する。
   - ダッシュボードやグラフで、月次・センター別・会社別の CO2 を可視化する。

3. **企業の CO2 削減支援**
   - CO2 削減量を「木の本数」「車の走行距離」など身近な指標に換算して表示し、企業の環境貢献を分かりやすく伝える。
   - 発注・購入を通じた削減効果を可視化し、行動変容を促す。

4. **マルチテナント B2B 構成**
   - 複数企業・複数センター（請求先・受注拠点）を対象とし、発注・請求・承認・請求書発行などを一括で管理する。

---

## 主な機能

- 発注管理（発注・承認・出荷・納品ステータス）
- 商品マスタ（CO2 係数登録）
- センター（請求先・受注拠点）管理
- 請求書・明細書 PDF 出力
- ダッシュボード（発注数・売上・CO2 推移・貢献度換算）
- ユーザー承認フロー（新規登録の承認）

---

## ターゲットユーザー

- クローズドリサイクルを推進する企業
- サプライチェーンで CO2 削減を計測・報告したい企業
- 複数拠点・複数センターで発注・請求を一元管理したい企業

---

## 技術スタック

- Ruby on Rails 7 / PostgreSQL / Puma
- Devise（認証）/ Pundit（認可）
- Active Storage / Prawn（PDF）

---

## 用語

- **センター** … 請求先センター（本社など）と受注センター（配送拠点）の総称。Customer モデルで `is_billing_center` で区別。
- **CO2 削減量** … 発注に紐づく CO2（商品の `co2_per_unit` × 数量の合計）。環境負荷の見える化・削減の指標として利用。
